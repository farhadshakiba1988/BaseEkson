{% load static %}
{% block test1 %}
    <div class="grid grid-cols-12 gap-x-6">
        <div class="col-span-12">
            <div class="box">
                <div class="box-body">
                    <div class="table-bordered rounded-sm ti-custom-table-head overflow-auto">
                        <table class="ti-custom-table ti-custom-table-head whitespace-nowrap">
                            <thead class="bg-gray-50 dark:bg-black/20">
                            <tr class="">
                                <th scope="col" class="dark:text-white/80">CRM.no</th>
                                <th scope="col" class="dark:text-white/80">کارشناس</th>
                                <th scope="col" class="dark:text-white/80">شماره شرکت</th>
                                <th scope="col" class="dark:text-white/80">شرکت</th>
                                <th scope="col" class="dark:text-white/80">محل دریافت کالا</th>
                                <th scope="col" class="dark:text-white/80">زمان تحویل</th>
                                <th scope="col" class="dark:text-white/80">وضعیت</th>
                                <th scope="col" class="dark:text-white/80">نمایش</th>
                            </tr>
                            </thead>
                            <tbody class="">
                            {% for person in persons %}
                                <tr class="">
                                    <td>{{ forloop.counter }}</td>
                                    <td>
                                        <div class="flex space-x-3 rtl:space-x-reverse text-start min-w-[200px]">
                                            <div class="block my-auto">
                                                <p class="block text-sm font-semibold my-auto text-gray-800 dark:text-white">
                                                    {{ person.name }}</p>
                                                <span class="block text-xs text-gray-400 dark:text-white/80 !font-normal my-auto">{{ person.email }}</span>
                                            </div>
                                        </div>
                                    </td>
                                    <td>{{ person.phone }}</td>
                                    <td>{{ person.company }}</td>
                                    <td>
                                        <div class="inline-flex items-center">
                                            <i class="ri-map-pin-fill text-gray-500 dark:text-white/70 text-xs"></i>
                                            <span class="ltr:ml-1 rtl:mr-1">{{ person.location }}</span>
                                        </div>
                                    </td>
                                    <td>{{ person.date }}</td>
                                    <td><span
                                            class="truncate whitespace-nowrap inline-block py-1 px-3 rounded-full text-xs font-medium bg-success/10 text-success/80">{{ person.status }}</span>
                                    </td>
                                    <td class="font-medium space-x-2 rtl:space-x-reverse">
                                        <div class="hs-tooltip ti-main-tooltip">
                                            <a href="javascript:void(0);"
                                               class="view-btn m-0 hs-tooltip-toggle relative w-8 h-8 ti-btn rounded-full p-0 transition-none focus:outline-none ti-btn-soft-primary"
                                               data-info="{{ person.id }},{{ person.name }},{{ person.email }},{{ person.phone }},{{ person.company }},{{ person.location }},{{ person.date }},{{ person.status }}">
                                                <i class="ti ti-eye"></i>
                                                <span class="hs-tooltip-content ti-main-tooltip-content py-1 px-2 bg-gray-900 text-xs font-medium text-white shadow-sm dark:bg-slate-700 hidden"
                                                      role="tooltip" data-popper-placement="top"
                                                      style="position: fixed; inset: auto auto 0px 0px; margin: 0px; transform: translate(1686px, -243px);">View</span>
                                            </a>
                                        </div>
                                        <div class="hs-tooltip ti-main-tooltip">
                                            <a href="javascript:void(0);"
                                               class="customer-edit m-0 hs-tooltip-toggle relative w-8 h-8 ti-btn rounded-full p-0 transition-none focus:outline-none ti-btn-soft-secondary">
                                                <i class="ti ti-pencil"></i>
                                                <span class="hs-tooltip-content ti-main-tooltip-content py-1 px-2 bg-gray-900 text-xs font-medium text-white shadow-sm dark:bg-slate-700"
                                                      role="tooltip">Edit</span>
                                            </a>
                                        </div>
                                        <div class="hs-tooltip ti-main-tooltip">
                                            <a href="javascript:void(0);"
                                               class="m-0 hs-tooltip-toggle relative w-8 h-8 ti-btn rounded-full p-0 transition-none focus:outline-none ti-btn-soft-danger">
                                                <i class="ti ti-trash"></i>
                                                <span class="hs-tooltip-content ti-main-tooltip-content py-1 px-2 bg-gray-900 text-xs font-medium text-white shadow-sm dark:bg-slate-700"
                                                      role="tooltip">Delete</span>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="box-footer">
                    <div class="sm:flex items-center">
                        <div class="">
                            showing {{ persons|length }} Entries <i class="ri-arrow-right-line ml-2 font-semibold"></i>
                        </div>
                        <div class="ltr:ml-auto rtl:mr-auto">
                            <nav class="flex justify-center items-center space-x-2 rtl:space-x-reverse">
                                <a class="text-gray-500 hover:text-primary e py-1 px-2 leading-none inline-flex items-center gap-2 rounded-sm"
                                   href="javascript:void(0);">
                                    <span aria-hidden="true">Prev</span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="bg-primary text-white py-1 px-2 leading-none inline-flex items-center text-sm font-medium rounded-sm"
                                   href="javascript:void(0);" aria-current="page">1</a>
                                <a class="text-gray-500 hover:text-primary e py-1 px-2 leading-none inline-flex items-center text-sm font-medium rounded-sm"
                                   href="javascript:void(0);">2</a>
                                <a class="text-gray-500 hover:text-primary e py-1 px-2 leading-none inline-flex items-center text-sm font-medium rounded-sm"
                                   href="javascript:void(0);">3</a>
                                <a class="text-gray-500 hover:text-primary e py-1 px-2 leading-none inline-flex items-center gap-2 rounded-sm"
                                   href="javascript:void(0);">
                                    <span class="sr-only">Next</span>
                                    <span aria-hidden="true">Next</span>
                                </a>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Structure -->
    <div id="modal"
         style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; align-items:center; justify-content:center; background-color:rgba(0,0,0,0.5);">
        <div style="background:#2d3748; padding:20px; border-radius:5px; width:50%; color:white;">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h2>Modal Title</h2>
                <button id="closeModal" style="background:none; border:none; font-size:20px; color:white;">&times;
                </button>
            </div>
            <div id="modal-info" class="modal-content"
                 style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <!-- اطلاعات به صورت پویا اینجا نمایش داده می‌شود -->
            </div>
        </div>
    </div>

    <!-- JavaScript to handle the modal -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var modal = document.getElementById("modal");
            var closeModalButton = document.getElementById("closeModal");
            var modalInfo = document.getElementById("modal-info");

            document.querySelectorAll('.view-btn').forEach(function (button) {
                button.addEventListener('click', function () {
                    var data = this.getAttribute('data-info').split(',');
                    var info = `
          <div><strong>S.no:</strong> ${data[0]}</div>
          <div><strong>Name:</strong> ${data[1]}</div>
          <div><strong>Email:</strong> ${data[2]}</div>
          <div><strong>Phone:</strong> ${data[3]}</div>
          <div><strong>Company:</strong> ${data[4]}</div>
          <div><strong>Location:</strong> ${data[5]}</div>
          <div><strong>Date:</strong> ${data[6]}</div>
          <div><strong>Status:</strong> ${data[7]}</div>
        `;
                    modalInfo.innerHTML = info;
                    modal.style.display = "flex";
                });
            });

            closeModalButton.addEventListener('click', function () {
                modal.style.display = "none";
            });

            window.addEventListener('click', function (event) {
                if (event.target === modal) {
                    modal.style.display = "none";
                }
            });
        });
    </script>
{% endblock %}
